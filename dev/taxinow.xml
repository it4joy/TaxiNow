<context>
	<input id="start_bot" pattern="/start $Text">
		<context id="start_bot_use">
			<output value="Hi, I'm a taxi operator. Please, write your phone number, only digits."/>
			
			<input id="phone" pattern="$Text">
				<var name="userPhoneNum" value="$Text" scope="user"/>
				
				<context id="number_use" if="full($userPhoneNum)">
					<output value="Where are you?"/>
					
					<input id="start_point" pattern="$Text">
						<var name="startPoint" value="$Text" scope="context"/>
						
						<context id="start_point_use" if="full($startPoint)">
							<output value="Ok. And where would you like to go?"/>
							
							<input id="end_point" pattern="$Text">
								<var name="endPoint" value="$Text" scope="context"/>
								
								<context id="end_point_use" if="full($endPoint)">
									<output value="Ok. What type of taxi you need? Passenger - p, cargo - c"/>

									<pattern name="taxiType" value="(* p *|* Ñ *)"/>
									<input id="taxi_type" pattern="$taxiType">
										<var name="taxiTypeSel" value="$taxiType"/>
										
										<context id="taxi_passenger" if="$taxiTypeSel == 'passenger'">
											<output value="Your choice is $taxiTypeSel"/>
										</context>
										
										<context id="taxi_cargo" if="$taxiTypeSel == 'cargo'">
											<output value="Your choice is $taxiTypeSel"/>
										</context>
									</input>
								</context>
							</input>
						</context>
					</input>
				</context>
			</input>
		</context>
	</input>
</context>