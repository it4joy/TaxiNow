<context>
	<input id="start_bot" pattern="/start $Text">
		<context id="start_bot_use">
			<output value="Hi, I'm a taxi operator. Please, write your phone number, only digits."/>
			
			<input id="phone" pattern="$Text">
				<var name="userPhoneNum" value="$Text" scope="user"/>
				
				<context id="number_use" if="full($userPhoneNum)">
					<output value="Where are you?"/>
					
					<input id="start_point" pattern="$Text">
						<var name="startPoint" value="$Text" scope="context"/>
						
						<context id="start_point_use" if="full($startPoint)">
							<output value="Ok. And where would you like to go?"/>
							
							<input id="end_point" pattern="$Text">
								<var name="endPoint" value="$Text" scope="context"/>
								
								<context id="end_point_use" if="full($endPoint)">
									<output value="Ok. What type of taxi you need? Passenger - p, cargo - c"/>

									<input id="taxi_type" pattern="$Text">
										<var name="taxiTypeSel" value="$Text" scope="context"/>

										<!-- Taxi :: passenger -->
										<context id="taxi_passenger" if='$taxiTypeSel == "p"'>
											<output value="Will children with you? Yes - y, No - n"/>

											<input id="children_are" pattern="$Text">
												<var name="childrenAreVal" value="$Text"/>

												<context id="children_yes" if='$childrenAreVal == "y"'>
													<output value="How many and what is their age (for choice of auto chairs)?"/>

													<input id="children_data" pattern="$Text">
														<var name="childrenData" value="$Text"/>
														<context id="final_msg"/>
													</input>
												</context>
												
												<context id="final_msg" if='$childrenAreVal == "n"'/>
											</input>
										</context>

										<!-- Taxi :: cargo -->
										<context id="taxi_cargo" if='$taxiTypeSel == "c"'>
											<output value="What type of truck you need?"/>
											
											<input pattern="*"/>
											<sample>
												<item value="before 1 tonne"/>
												<item value="before 2 tonne"/>
												<item value="before 3.5 tonne"/>
												<item value="before 5 tonne"/>
											</sample>
											<var name="tonnage" value="*"/>
											<context id="final_msg"/>
										</context>
									</input>
								</context>
							</input>
						</context>
					</input>
				</context>
			</input>
		</context>
		
		<context id="final_msg">
			<output value="Thanks, I will send you a message with info about auto."/>
		</context>
	</input>
</context>